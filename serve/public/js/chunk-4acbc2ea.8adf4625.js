(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4acbc2ea"],{"07ac":function(t,e,a){var i=a("23e7"),r=a("6f53").values;i({target:"Object",stat:!0},{values:function(t){return r(t)}})},"3f7a":function(t,e,a){"use strict";var i=a("acd3"),r=a.n(i);r.a},"48bc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-data container-fluid"},[a("div",{staticClass:"row shadow-sm sticky-top reset-title"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-Secondary",attrs:{type:"button",disabled:t.Loading},on:{click:function(e){return e.stopPropagation(),t.handleRefresh(e)}}},[t.Loading?[a("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[t._v("Loading...")])]:[t._v(" 刷新数据 "),a("svg",{staticClass:"bi bi-arrow-repeat",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M2.854 7.146a.5.5 0 0 0-.708 0l-2 2a.5.5 0 1 0 .708.708L2.5 8.207l1.646 1.647a.5.5 0 0 0 .708-.708l-2-2zm13-1a.5.5 0 0 0-.708 0L13.5 7.793l-1.646-1.647a.5.5 0 0 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0 0-.708z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M8 3a4.995 4.995 0 0 0-4.192 2.273.5.5 0 0 1-.837-.546A6 6 0 0 1 14 8a.5.5 0 0 1-1.001 0 5 5 0 0 0-5-5zM2.5 7.5A.5.5 0 0 1 3 8a5 5 0 0 0 9.192 2.727.5.5 0 1 1 .837.546A6 6 0 0 1 2 8a.5.5 0 0 1 .501-.5z"}})])]],2)])]),t._m(0)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-md-6 draw-item",attrs:{id:"category"}},[t._v("分类数据")]),a("div",{staticClass:"col-md-6 draw-item",attrs:{id:"create"}},[t._v("递增曲线")]),a("div",{staticClass:"col-md-6 draw-item",attrs:{id:"likes"}},[t._v("博客收藏排行")]),a("div",{staticClass:"col-md-6 draw-item",attrs:{id:"views"}},[t._v("博客浏览排行")]),a("div",{staticClass:"col-md-6 draw-item",attrs:{id:"user-add"}},[t._v("用户发布排行")])])}],n=(a("d81d"),a("b0c0"),a("4fad"),a("07ac"),a("96cf"),a("1da1")),s=a("d395"),o=a("c32d"),c=a.n(o),d={mixins:[s["a"]],data:function(){return{Loading:!1}},activated:function(){this.getCategoryData(),this.getStatistics()},methods:{handleRefresh:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.Loading){e.next=2;break}return e.abrupt("return");case 2:return t.Loading=!0,e.next=5,t.$store.dispatch("refreshStatistics");case 5:a=e.sent,i=a.ok,i&&location.reload();case 8:case"end":return e.stop()}}),e)})))()},getCategoryData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.showLoading(["#category"]),a=t.$store.state.blog.drawCategory,a.length){e.next=6;break}return e.next=5,t.$store.dispatch("getTypes_num");case 5:a=e.sent;case 6:i=a.map((function(t){return t.name})),r=a.map((function(t){return t.num})),n=a.map((function(t){return t.likes_num})),s={title:{text:"分类数据",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["博客数量","收藏数量"]},xAxis:{type:"category",data:i},yAxis:{type:"value"},series:[{name:"博客数量",type:"bar",stack:"总量",label:{show:!0},data:r},{name:"收藏数量",type:"bar",stack:"总量",label:{show:!0},data:n}]},t.MyDraw(s,"#category");case 11:case"end":return e.stop()}}),e)})))()},getStatistics:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,r,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.showLoading(["#views","#likes","#user-add","create"]),a=t.$store.state.blog.statistics,a.length){e.next=6;break}return e.next=5,t.$store.dispatch("getStatistics");case 5:a=e.sent;case 6:i=a,r=i.likes,n=i.views,s=i.createdAt,o=i.counts,t.setLikesOptions(r),t.setViewsOptions(n),t.setUserCountOptions(o),t.setCtreateAtOptions(s);case 11:case"end":return e.stop()}}),e)})))()},setViewsOptions:function(t){var e=t.map((function(t){return t.title})),a=t.map((function(t){return t.views})),i={title:{text:"博客浏览排行",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["观看数量"]},xAxis:{type:"category",show:!1,data:e},yAxis:{type:"value"},series:[{name:"观看数量",type:"bar",label:{show:!0},data:a}]};this.MyDraw(i,"#views")},setLikesOptions:function(t){var e=t.map((function(t){return t.title})),a=t.map((function(t){return t.likes_length})),i={title:{text:"博客收藏排行",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["收藏数量"]},xAxis:{type:"category",show:!1,data:e},yAxis:{type:"value"},series:[{name:"收藏数量",type:"bar",label:{show:!0},data:a}]};this.MyDraw(i,"#likes")},setUserCountOptions:function(t){var e=t.map((function(t){return t.username})),a=t.map((function(t){return t.blog_count})),i={title:{text:"发布数量排行",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["发布数量"]},xAxis:{type:"category",show:!1,data:e},yAxis:{type:"value"},series:[{name:"发布数量",type:"bar",label:{show:!0},data:a}]};this.MyDraw(i,"#user-add")},setCtreateAtOptions:function(t){for(var e={},a={},i=0;i<t.length;i++){var r=t[i],n=c()(r.createdAt).format("YYYY/MM/DD");e[n]?e[n]+=1:e[n]=(Object.values(e).pop()||0)+1,a[n]?a[n]+=1:a[n]=1}var s={title:{text:"博客递增曲线",textStyle:{fontSize:14}},legend:{data:["总数量","新增数量"]},tooltip:{trigger:"axis"},xAxis:{type:"time",splitLine:{show:!0}},yAxis:{type:"value",interval:1,splitLine:{show:!0}},series:[{name:"篇 总数量",type:"line",data:Object.entries(e)},{name:"篇 新增数量",type:"bar",data:Object.entries(a)}]};this.MyDraw(s,"#create")}}},l=d,u=(a("3f7a"),a("2877")),f=Object(u["a"])(l,i,r,!1,null,"60343bd3",null);e["default"]=f.exports},"4fad":function(t,e,a){var i=a("23e7"),r=a("6f53").entries;i({target:"Object",stat:!0},{entries:function(t){return r(t)}})},"6f53":function(t,e,a){var i=a("83ab"),r=a("df75"),n=a("fc6a"),s=a("d1e7").f,o=function(t){return function(e){var a,o=n(e),c=r(o),d=c.length,l=0,u=[];while(d>l)a=c[l++],i&&!s.call(o,a)||u.push(t?[a,o[a]]:o[a]);return u}};t.exports={entries:o(!0),values:o(!1)}},acd3:function(t,e,a){},c975:function(t,e,a){"use strict";var i=a("23e7"),r=a("4d64").indexOf,n=a("a640"),s=a("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,d=n("indexOf"),l=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!d||!l},{indexOf:function(t){return c?o.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},d395:function(t,e,a){"use strict";a("c975");e["a"]={methods:{MyDraw:function(t,e){0!==e.indexOf("#")&&(e="#"+e);var a=this.$echarts.init(document.querySelector(e));window.addEventListener("resize",(function(){a.resize()})),a.setOption(t),a.hideLoading()},showLoading:function(t){if(!Array.isArray(t))return console.error("showLoading target必须为数组!");for(var e=0;e<t.length;e++){0!==t[e].indexOf("#")&&(t[e]="#"+t[e]);var a=this.$echarts.init(document.querySelector(t[e]));a.showLoading(),0===a.getWidth()&&a.resize()}}}}}}]);
//# sourceMappingURL=chunk-4acbc2ea.8adf4625.js.map