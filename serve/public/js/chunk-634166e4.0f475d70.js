(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-634166e4"],{"82a6":function(e,t,s){},"90a1":function(e,t,s){"use strict";var n=s("82a6"),i=s.n(n);i.a},e1ef:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"blog-show"},[s("HomeHeader",{staticClass:"show-header",attrs:{searchPage:"show-blog",placeholder:"搜索相关文章"}}),s("div",{ref:"article",staticClass:"article"},[s("div",{staticClass:"article-header"},[s("div",{staticClass:"title"},[e._v(e._s(e.blog.title))]),s("div",{staticClass:"article-author-edit"},[s("div",{staticClass:"article-author"},[s("div",{staticClass:"img"},[s("img",{directives:[{name:"img",rawName:"v-img:avatar",arg:"avatar"}],staticClass:"ueser-head",attrs:{src:e.baseIMGURL+e.userid+"?byuserid=1"}})]),s("div",{staticClass:"user-name-time"},[s("span",{directives:[{name:"root",rawName:"v-root"}],staticClass:"user-name",attrs:{"data-userid":e.blog.userid}},[e._v(e._s(e.blog.username))]),s("span",{staticClass:"time"},[e._v(" "+e._s(e._f("date1")(e.blog.createdAt))+" ")])])]),s("div",{staticClass:"article-edit"},[s("span",{staticClass:"views iconfont icon-Icon-guankanliang"},[e._v(" "+e._s(e.blog.views)+" ")]),s("span",{class:["like","iconfont",e.thumbs_ups.includes(e.user._id)?"icon-dianzan":"icon-zan"],on:{click:function(t){return t.stopPropagation(),e.handleLiked("thumbs")}}},[e._v(e._s(e.thumbs_ups.length))]),s("span",{class:["like","iconfont",e.likes.includes(e.user._id)?"icon-shoucang":"icon-shoucang1"],on:{click:function(t){return t.stopPropagation(),e.handleLiked("likes")}}},[e._v(e._s(e.likes.length))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.user._id===e.blog.userid,expression:"user._id === blog.userid"}],staticClass:"edit",on:{click:function(t){return t.stopPropagation(),e.handleEdit(t)}}},[e._v("编辑")])])])]),s("div",{staticClass:"markdown-body article-detail",domProps:{innerHTML:e._s(e.html)}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}],staticClass:"comments"},[s("BlogComment",{attrs:{comments:e.blog.comments},on:{handleAddComment:e.handleAddComment,handleDelComment:e.handleDelComment}})],1)])],1)},i=[],a=(s("96cf"),s("1da1")),r={data:function(){return{blog:{html:"",comments:[],likes:[],thumbs_ups:[]}}},mounted:function(){var e=this.$route.params.id;this.blog._id!==e&&this.getBlogById(e)},computed:{html:function(){return this.blog.html},userid:function(){return this.blog.userid||"default.png"},likes:function(){return this.blog.likes},thumbs_ups:function(){return this.blog.thumbs_ups}},methods:{handleDelComment:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("delComment",{id:e});case 2:n=s.sent,t.blog.comments=n.comments;case 4:case"end":return s.stop()}}),s)})))()},handleAddComment:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=t.blog._id,s.next=3,t.$store.dispatch("addComment",{blogID:n,context:e});case 3:i=s.sent,t.blog.comments=i.comments,t.$nextTick((function(){var e=document.body.clientWidth;if(e>500){var t=document.body.clientHeight;window.scroll({top:t,left:0,behavior:"smooth"})}else{var s=this.$refs.article.scrollHeight;this.$refs.article.scroll({top:s,left:0,behavior:"smooth"})}}));case 6:case"end":return s.stop()}}),s)})))()},getBlogById:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("getBlogById",e);case 2:n=s.sent,t.blog=n,t.likes=n.likes,document.title=n.title;case 6:case"end":return s.stop()}}),s)})))()},handleEdit:function(){this.$router.push({path:"/add-blog?type=edit&id="+this.blog._id})},handleLiked:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log(t.blog),s.next=3,t.$store.dispatch("toggleLike",{blogID:t.blog._id,userID:t.user._id,key:e});case 3:n=s.sent,t.blog=n;case 5:case"end":return s.stop()}}),s)})))()}}},o=r,c=(s("90a1"),s("2877")),l=Object(c["a"])(o,n,i,!1,null,"6d55522c",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-634166e4.0f475d70.js.map