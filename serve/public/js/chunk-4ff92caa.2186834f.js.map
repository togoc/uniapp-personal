{"version":3,"sources":["webpack:///./src/views/BlogShow.vue?4756","webpack:///src/views/BlogShow.vue","webpack:///./src/views/BlogShow.vue?b757","webpack:///./src/views/BlogShow.vue","webpack:///./src/views/BlogShow.vue?292e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ref","_v","_s","blog","title","directives","name","rawName","arg","baseIMGURL","userid","username","_f","createdAt","views","class","thumbs_ups","includes","user","_id","on","$event","stopPropagation","handleLiked","length","likes","value","expression","handleEdit","domProps","html","comments","handleAddComment","handleDelComment","staticRenderFns","data","mounted","id","getBlogById","computed","methods","$router","push","path","component"],"mappings":"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","file":"js/chunk-4ff92caa.2186834f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"blog-show\"},[_c('HomeHeader',{staticClass:\"show-header\",attrs:{\"searchPage\":\"show-blog\",\"placeholder\":\"搜索相关文章\"}}),_c('div',{ref:\"article\",staticClass:\"article\"},[_c('div',{staticClass:\"article-header\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.blog.title))]),_c('div',{staticClass:\"article-author-edit\"},[_c('div',{staticClass:\"article-author\"},[_c('div',{staticClass:\"img\"},[_c('img',{directives:[{name:\"img\",rawName:\"v-img:avatar\",arg:\"avatar\"}],staticClass:\"ueser-head\",attrs:{\"src\":_vm.baseIMGURL + _vm.userid + '?byuserid=1'}})]),_c('div',{staticClass:\"user-name-time\"},[_c('span',{directives:[{name:\"root\",rawName:\"v-root\"}],staticClass:\"user-name\",attrs:{\"data-userid\":_vm.blog.userid}},[_vm._v(_vm._s(_vm.blog.username))]),_c('span',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm._f(\"date1\")(_vm.blog.createdAt))+\" \")])])]),_c('div',{staticClass:\"article-edit\"},[_c('span',{staticClass:\"views iconfont icon-Icon-guankanliang\"},[_vm._v(\" \"+_vm._s(_vm.blog.views)+\" \")]),_c('span',{class:[\n                              'like',\n                              'iconfont',\n                              _vm.thumbs_ups.includes(_vm.user._id) ? 'icon-dianzan' : 'icon-zan'\n                          ],on:{\"click\":function($event){$event.stopPropagation();return _vm.handleLiked('thumbs')}}},[_vm._v(_vm._s(_vm.thumbs_ups.length))]),_c('span',{class:[\n                              'like',\n                              'iconfont',\n                              _vm.likes.includes(_vm.user._id) ? 'icon-shoucang' : 'icon-shoucang1'\n                          ],on:{\"click\":function($event){$event.stopPropagation();return _vm.handleLiked('likes')}}},[_vm._v(_vm._s(_vm.likes.length))]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.user._id === _vm.blog.userid),expression:\"user._id === blog.userid\"}],staticClass:\"edit\",on:{\"click\":function($event){$event.stopPropagation();return _vm.handleEdit($event)}}},[_vm._v(\"编辑\")])])])]),_c('div',{staticClass:\"markdown-body article-detail\",domProps:{\"innerHTML\":_vm._s(_vm.html)}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLogin),expression:\"isLogin\"}],staticClass:\"comments\"},[_c('BlogComment',{attrs:{\"comments\":_vm.blog.comments},on:{\"handleAddComment\":_vm.handleAddComment,\"handleDelComment\":_vm.handleDelComment}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"blog-show\">\r\n    <HomeHeader class=\"show-header\" searchPage=\"show-blog\" placeholder=\"搜索相关文章\" />\r\n    <div class=\"article\" ref=\"article\">\r\n      <div class=\"article-header\">\r\n        <div class=\"title\">{{ blog.title }}</div>\r\n        <div class=\"article-author-edit\">\r\n          <div class=\"article-author\">\r\n            <div class=\"img\">\r\n              <img v-img:avatar :src=\"baseIMGURL + userid + '?byuserid=1'\" class=\"ueser-head\" />\r\n            </div>\r\n            <div class=\"user-name-time\">\r\n              <span class=\"user-name\" v-root :data-userid=\"blog.userid\">{{ blog.username }}</span>\r\n              <span class=\"time\">\r\n                {{\r\n                blog.createdAt | date1\r\n                }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class=\"article-edit\">\r\n            <span class=\"views iconfont icon-Icon-guankanliang\">\r\n              {{\r\n              blog.views\r\n              }}\r\n            </span>\r\n            <span\r\n              @click.stop=\"handleLiked('thumbs')\"\r\n              :class=\"[\r\n                                'like',\r\n                                'iconfont',\r\n                                thumbs_ups.includes(user._id) ? 'icon-dianzan' : 'icon-zan'\r\n                            ]\"\r\n            >{{ thumbs_ups.length }}</span>\r\n            <span\r\n              @click.stop=\"handleLiked('likes')\"\r\n              :class=\"[\r\n                                'like',\r\n                                'iconfont',\r\n                                likes.includes(user._id) ? 'icon-shoucang' : 'icon-shoucang1'\r\n                            ]\"\r\n            >{{ likes.length }}</span>\r\n            <span class=\"edit\" @click.stop=\"handleEdit\" v-show=\"user._id === blog.userid\">编辑</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"markdown-body article-detail\" v-html=\"html\"></div>\r\n      <div class=\"comments\" v-show=\"isLogin\">\r\n        <BlogComment\r\n          @handleAddComment=\"handleAddComment\"\r\n          @handleDelComment=\"handleDelComment\"\r\n          :comments=\"blog.comments\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      blog: {\r\n        html: \"\",\r\n        comments: [],\r\n        likes: [],\r\n        thumbs_ups: []\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    let id = this.$route.params.id;\r\n    if (this.blog._id === id) return;\r\n    this.getBlogById(id);\r\n  },\r\n  computed: {\r\n    html() {\r\n      return this.blog.html;\r\n    },\r\n    userid() {\r\n      return this.blog.userid || \"default.png\";\r\n    },\r\n    likes() {\r\n      return this.blog.likes;\r\n    },\r\n    thumbs_ups() {\r\n      return this.blog.thumbs_ups;\r\n    }\r\n  },\r\n  methods: {\r\n    async handleDelComment(id) {\r\n      let blog = await this.$store.dispatch(\"delComment\", {\r\n        id\r\n      });\r\n      this.blog.comments = blog.comments;\r\n    },\r\n    async handleAddComment(v) {\r\n      let blogID = this.blog._id;\r\n      let blog = await this.$store.dispatch(\"addComment\", {\r\n        blogID,\r\n        context: v\r\n      });\r\n      this.blog.comments = blog.comments;\r\n      this.$nextTick(function() {\r\n        // 不同宽度的container不同\r\n        let width = document.body.clientWidth;\r\n        if (width > 500) {\r\n          let t = document.body.clientHeight;\r\n          window.scroll({\r\n            top: t,\r\n            left: 0,\r\n            behavior: \"smooth\"\r\n          });\r\n        } else {\r\n          let t = this.$refs.article.scrollHeight;\r\n          this.$refs.article.scroll({\r\n            top: t,\r\n            left: 0,\r\n            behavior: \"smooth\"\r\n          });\r\n        }\r\n      });\r\n    },\r\n    async getBlogById(id) {\r\n      let blog = await this.$store.dispatch(\"getBlogById\", id);\r\n      this.blog = blog;\r\n      this.likes = blog.likes;\r\n      document.title = blog.title;\r\n    },\r\n    handleEdit() {\r\n      this.$router.push({\r\n        path: \"/add-blog?type=edit&id=\" + this.blog._id\r\n      });\r\n    },\r\n    /**\r\n     * thumbs 或者 likes\r\n     */\r\n    async handleLiked(key) {\r\n      console.log(this.blog);\r\n      let data = await this.$store.dispatch(\"toggleLike\", {\r\n        blogID: this.blog._id,\r\n        userID: this.user._id,\r\n        key\r\n      });\r\n      this.blog = data;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.blog-show {\r\n  height: 100%;\r\n  padding-top: 44px;\r\n  overflow-y: auto;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  margin-bottom: 12px;\r\n\r\n  .article {\r\n    padding: 0 0.5rem;\r\n    margin: 0 auto;\r\n    box-sizing: border-box;\r\n    margin-top: 0.5rem;\r\n    max-width: 962px;\r\n    background-color: #fff;\r\n    width: 100%;\r\n    div.article-header {\r\n      padding: 1rem;\r\n      box-sizing: border-box;\r\n      z-index: 9;\r\n      background-color: #fff;\r\n      width: 100%;\r\n      div.title {\r\n        letter-spacing: 0;\r\n        line-height: calc(24px * 1.3333);\r\n        font-size: 24px;\r\n        font-weight: bold;\r\n        margin: 18.76px 0;\r\n      }\r\n\r\n      div.article-author-edit {\r\n        font-size: 14px;\r\n        min-height: 40px;\r\n        padding: 0.5rem;\r\n        border-bottom: 1px solid #f5f6f7;\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        flex-wrap: wrap;\r\n        div.article-author {\r\n          display: flex;\r\n          flex-direction: row;\r\n          align-items: center;\r\n          position: relative;\r\n          .img {\r\n            margin-right: $uni-spacing-col-sm;\r\n            width: 30px;\r\n            height: 30px;\r\n            img.ueser-head {\r\n              width: 30px;\r\n              height: 30px;\r\n              border-radius: $uni-border-radius-circle;\r\n            }\r\n          }\r\n          span {\r\n            margin-right: $uni-spacing-col-base;\r\n            display: block;\r\n          }\r\n          .user-name-time {\r\n            display: flex;\r\n            flex-direction: column;\r\n            span.user-name {\r\n              white-space: nowrap;\r\n              line-height: calc(16px * 1.333);\r\n              font-size: 16px;\r\n              font-weight: bold;\r\n            }\r\n\r\n            span.time {\r\n              font-size: 12px;\r\n              white-space: nowrap;\r\n              color: $uni-text-color-grey;\r\n            }\r\n          }\r\n        }\r\n\r\n        div.article-edit {\r\n          user-select: none;\r\n          padding: 0.5rem;\r\n          padding-left: 38px;\r\n          span {\r\n            padding: 0 5px;\r\n          }\r\n          span.views {\r\n            white-space: nowrap;\r\n            color: $uni-color-primary;\r\n            font-size: 14px;\r\n            padding-left: 0;\r\n            &::before {\r\n              color: $uni-text-color;\r\n              font-size: 16px;\r\n            }\r\n          }\r\n\r\n          span.like {\r\n            white-space: nowrap;\r\n            letter-spacing: 2px;\r\n            cursor: pointer;\r\n            border-left: 1px solid $uni-bg-color-grey-more;\r\n            color: $uni-text-color-grey;\r\n            font-size: 14px;\r\n            &::before {\r\n              color: $uni-color-error;\r\n              font-size: 16px;\r\n            }\r\n          }\r\n          .edit {\r\n            border-left: 1px solid $uni-bg-color-grey-more;\r\n            letter-spacing: 3px;\r\n            cursor: pointer;\r\n            color: $uni-color-primary;\r\n            &:hover {\r\n              color: $uni-color-error;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .article-detail {\r\n      background-color: #fff;\r\n      padding: 1rem;\r\n    }\r\n    .comments {\r\n      padding: 0 calc(1rem + 8px);\r\n      box-sizing: border-box;\r\n      max-width: 962px;\r\n      width: 100%;\r\n      margin: 12px auto 0;\r\n      background-color: #fff;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlogShow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlogShow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BlogShow.vue?vue&type=template&id=fb968f8e&scoped=true&\"\nimport script from \"./BlogShow.vue?vue&type=script&lang=js&\"\nexport * from \"./BlogShow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BlogShow.vue?vue&type=style&index=0&id=fb968f8e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fb968f8e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlogShow.vue?vue&type=style&index=0&id=fb968f8e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlogShow.vue?vue&type=style&index=0&id=fb968f8e&lang=scss&scoped=true&\""],"sourceRoot":""}