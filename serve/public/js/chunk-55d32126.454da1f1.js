(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55d32126"],{"48bc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-data container-fluid"},[a("div",{staticClass:"row shadow-sm sticky-top reset-title"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-Secondary",attrs:{type:"button",disabled:t.Loading},on:{click:function(e){return e.stopPropagation(),t.handleRefresh(e)}}},[t.Loading?[a("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[t._v("Loading...")])]:[t._v(" 刷新数据 "),a("svg",{staticClass:"bi bi-arrow-repeat",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M2.854 7.146a.5.5 0 0 0-.708 0l-2 2a.5.5 0 1 0 .708.708L2.5 8.207l1.646 1.647a.5.5 0 0 0 .708-.708l-2-2zm13-1a.5.5 0 0 0-.708 0L13.5 7.793l-1.646-1.647a.5.5 0 0 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0 0-.708z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M8 3a4.995 4.995 0 0 0-4.192 2.273.5.5 0 0 1-.837-.546A6 6 0 0 1 14 8a.5.5 0 0 1-1.001 0 5 5 0 0 0-5-5zM2.5 7.5A.5.5 0 0 1 3 8a5 5 0 0 0 9.192 2.727.5.5 0 1 1 .837.546A6 6 0 0 1 2 8a.5.5 0 0 1 .501-.5z"}})])]],2)])]),t._m(0)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-md-6 draw-item",attrs:{id:"category"}}),a("div",{staticClass:"col-md-6 draw-item",attrs:{id:"likes"}},[t._v("2")]),a("div",{staticClass:"col-md-6 draw-item",attrs:{id:"views"}},[t._v("2")]),a("div",{staticClass:"col-md-6 draw-item",attrs:{id:"user-add"}})])}],n=(a("d81d"),a("b0c0"),a("96cf"),a("1da1")),r=a("d395"),o={mixins:[r["a"]],data:function(){return{Loading:!1}},activated:function(){this.getCategoryData(),this.getStatistics()},methods:{handleRefresh:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.Loading){e.next=2;break}return e.abrupt("return");case 2:return t.Loading=!0,e.next=5,t.$store.dispatch("refreshStatistics");case 5:a=e.sent,i=a.ok,i&&location.reload();case 8:case"end":return e.stop()}}),e)})))()},getCategoryData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.showLoading(["#category"]),a=t.$store.state.blog.drawCategory,a.length){e.next=6;break}return e.next=5,t.$store.dispatch("getTypes_num");case 5:a=e.sent;case 6:i=a.map((function(t){return t.name})),s=a.map((function(t){return t.num})),n=a.map((function(t){return t.likes_num})),r={title:{text:"分类数据",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["博客数量","收藏数量"]},xAxis:{type:"category",data:i},yAxis:{type:"value"},series:[{name:"博客数量",type:"bar",stack:"总量",label:{show:!0},data:s},{name:"收藏数量",type:"bar",stack:"总量",label:{show:!0},data:n}]},t.MyDraw(r,"#category");case 11:case"end":return e.stop()}}),e)})))()},getStatistics:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.showLoading(["#views","#likes","#user-add"]),a=t.$store.state.blog.statistics,a.length){e.next=6;break}return e.next=5,t.$store.dispatch("getStatistics");case 5:a=e.sent;case 6:i=a,s=i.likes,n=i.views,i.createdAt,r=i.counts,t.setLikesOptions(s),t.setViewsOptions(n),t.setUserCountOptions(r);case 10:case"end":return e.stop()}}),e)})))()},setViewsOptions:function(t){var e=t.map((function(t){return t.title})),a=t.map((function(t){return t.views})),i={title:{text:"博客浏览排行",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["观看数量"]},xAxis:{type:"category",show:!1,data:e},yAxis:{type:"value"},series:[{name:"观看数量",type:"bar",label:{show:!0},data:a}]};this.MyDraw(i,"#views")},setLikesOptions:function(t){var e=t.map((function(t){return t.title})),a=t.map((function(t){return t.likes_length})),i={title:{text:"博客收藏排行",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["收藏数量"]},xAxis:{type:"category",show:!1,data:e},yAxis:{type:"value"},series:[{name:"收藏数量",type:"bar",label:{show:!0},data:a}]};this.MyDraw(i,"#likes")},setUserCountOptions:function(t){var e=t.map((function(t){return t.username})),a=t.map((function(t){return t.blog_count})),i={title:{text:"发布数量排行",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["发布数量"]},xAxis:{type:"category",show:!1,data:e},yAxis:{type:"value"},series:[{name:"发布数量",type:"bar",label:{show:!0},data:a}]};this.MyDraw(i,"#user-add")},setCtreateAtOptions:function(t){console.log(t);var e={title:{text:"新发布博客数量",textStyle:{fontSize:14}},tooltip:{show:!0,trigger:"axis"},xAxis:{type:"time",splitLine:{show:!0},data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value",splitLine:{show:!0}},series:[{name:"数量",type:"line",showSymbol:!1,hoverAnimation:!1,areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]};this.MyDraw(e,"#create")}}},c=o,d=(a("813c"),a("2877")),l=Object(d["a"])(c,i,s,!1,null,"ba162140",null);e["default"]=l.exports},"6ad4":function(t,e,a){},"813c":function(t,e,a){"use strict";var i=a("6ad4"),s=a.n(i);s.a},c975:function(t,e,a){"use strict";var i=a("23e7"),s=a("4d64").indexOf,n=a("a640"),r=a("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,d=n("indexOf"),l=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!d||!l},{indexOf:function(t){return c?o.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})},d395:function(t,e,a){"use strict";a("c975");e["a"]={methods:{MyDraw:function(t,e){0!==e.indexOf("#")&&(e="#"+e);var a=this.$echarts.init(document.querySelector(e));window.addEventListener("resize",(function(){a.resize()})),a.setOption(t),a.hideLoading()},showLoading:function(t){if(!Array.isArray(t))return console.error("showLoading target必须为数组!");for(var e=0;e<t.length;e++){0!==t[e].indexOf("#")&&(t[e]="#"+t[e]);var a=this.$echarts.init(document.querySelector(t[e]));a.showLoading(),0===a.getWidth()&&a.resize()}}}}}}]);
//# sourceMappingURL=chunk-55d32126.454da1f1.js.map